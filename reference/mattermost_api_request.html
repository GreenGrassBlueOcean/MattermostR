<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Make a Mattermost API Request — mattermost_api_request • MattermostR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Make a Mattermost API Request — mattermost_api_request"><meta name="description" content="This function sends an HTTP request to the Mattermost API using authentication details,
endpoint, and method provided. It handles retries with exponential backoff for
failed requests and supports both regular JSON requests and multipart file uploads."><meta property="og:description" content="This function sends an HTTP request to the Mattermost API using authentication details,
endpoint, and method provided. It handles retries with exponential backoff for
failed requests and supports both regular JSON requests and multipart file uploads."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MattermostR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Make a Mattermost API Request</h1>

      <div class="d-none name"><code>mattermost_api_request.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function sends an HTTP request to the Mattermost API using authentication details,
endpoint, and method provided. It handles retries with exponential backoff for
failed requests and supports both regular JSON requests and multipart file uploads.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mattermost_api_request</span><span class="op">(</span></span>
<span>  <span class="va">auth</span>,</span>
<span>  <span class="va">endpoint</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"GET"</span>,</span>
<span>  body <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  multipart <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-auth">auth<a class="anchor" aria-label="anchor" href="#arg-auth"></a></dt>
<dd><p>A list containing the `base_url` and `headers` (which includes the authentication token).</p></dd>


<dt id="arg-endpoint">endpoint<a class="anchor" aria-label="anchor" href="#arg-endpoint"></a></dt>
<dd><p>A string specifying the API endpoint (e.g., `"/api/v4/teams"`).</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>A string specifying the HTTP method to use. Options include `"GET"`, `"POST"`, `"PUT"`, and `"DELETE"`.</p></dd>


<dt id="arg-body">body<a class="anchor" aria-label="anchor" href="#arg-body"></a></dt>
<dd><p>(Optional) A list or object representing the body of the request (e.g., for `POST` or `PUT` requests).</p></dd>


<dt id="arg-multipart">multipart<a class="anchor" aria-label="anchor" href="#arg-multipart"></a></dt>
<dd><p>(Logical) Set to `TRUE` if the request includes multipart data (e.g., file upload).</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>(Logical) If `TRUE`, detailed information about the request and response will be printed.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The content of the response, usually parsed as JSON. On error, raises a
  <code>mattermost_error</code> condition (default) or returns <code>NULL</code> (legacy mode).</p>
    </div>
    <div class="section level2">
    <h2 id="rate-limiting">Rate Limiting<a class="anchor" aria-label="anchor" href="#rate-limiting"></a></h2>


<p>Requests are proactively throttled via <code><a href="https://httr2.r-lib.org/reference/req_throttle.html" class="external-link">httr2::req_throttle()</a></code> at a rate
controlled by <code>getOption("MattermostR.rate_limit", 10)</code> requests per second.
Set to <code>Inf</code> to disable throttling. The default of 10 matches
Mattermost's out-of-the-box server setting (configurable in System Console).</p>
<p>If the server returns HTTP 429 (Too Many Requests), the retry logic reads the
<code>X-Ratelimit-Reset</code> header to wait exactly the right number of seconds
before retrying.</p>
    </div>
    <div class="section level2">
    <h2 id="error-handling">Error Handling<a class="anchor" aria-label="anchor" href="#error-handling"></a></h2>


<p>By default, HTTP errors and connection failures raise a <code>mattermost_error</code>
condition (an S3 error class) that can be caught with
<code>tryCatch(..., mattermost_error = function(e) ...)</code>.</p>
<p>Set <code>options(MattermostR.on_error = "message")</code> to revert to the legacy
behaviour where errors are emitted via <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> and the function
returns <code>NULL</code>.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Laurens van der Burg.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>


% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/send_webhook_message.R
\name{send_webhook_message}
\alias{send_webhook_message}
\title{Send a Message via a Mattermost Incoming Webhook}
\usage{
send_webhook_message(
  webhook_url,
  text = NULL,
  channel = NULL,
  username = NULL,
  icon_url = NULL,
  icon_emoji = NULL,
  attachments = NULL,
  props = NULL,
  priority = NULL
)
}
\arguments{
\item{webhook_url}{The full incoming webhook URL (e.g.
\code{"https://mattermost.example.com/hooks/xxx-generatedkey-xxx"}).
Treat this as a secret.}

\item{text}{Markdown-formatted message text. Required unless
\code{attachments} is provided.}

\item{channel}{Optional. Override the channel the message posts in. Use the
channel's short name (e.g. \code{"town-square"}), not the display name.
Use \code{"@username"} to send a direct message.}

\item{username}{Optional. Override the username the message posts as.
Requires the server setting
\emph{Enable integrations to override usernames} to be enabled.}

\item{icon_url}{Optional. Override the profile picture with an image URL.
Requires the server setting
\emph{Enable integrations to override profile picture icons} to be enabled.}

\item{icon_emoji}{Optional. Override the profile picture with an emoji
(e.g. \code{":robot:"}). Takes precedence over \code{icon_url}.}

\item{attachments}{Optional. A list of
\href{https://developers.mattermost.com/integrate/reference/message-attachments/}{message attachment}
objects for richer formatting. Required if \code{text} is not provided.}

\item{props}{Optional. A named list of extra properties for the post.
Supports the \code{card} key for additional Markdown shown in the
right-hand side panel.}

\item{priority}{Optional. A list specifying message priority (e.g.
\code{list(priority = "important")}).}
}
\value{
The \code{httr2} response object, returned invisibly. A successful
  request returns HTTP 200 with body \code{"ok"}.
}
\description{
Posts a message to Mattermost using an incoming webhook URL. Incoming
webhooks are simpler than bot-token authentication â€” no \code{auth} object
is needed. The webhook URL itself acts as the credential.
}
\details{
Incoming webhooks must be enabled on the Mattermost server
(\strong{System Console > Integrations > Integration Management}).
The webhook URL is created via
\strong{Product menu > Integrations > Incoming Webhook} in Mattermost.

The request is retried up to 3 times on transient failures.
}
\examples{
\dontrun{
# Simple text message
send_webhook_message(
  webhook_url = "https://mattermost.example.com/hooks/xxx-generatedkey-xxx",
  text = "Hello from R!"
)

# Override channel and username
send_webhook_message(
  webhook_url = "https://mattermost.example.com/hooks/xxx-generatedkey-xxx",
  text = "Build passed :white_check_mark:",
  channel = "ci-notifications",
  username = "CI Bot",
  icon_emoji = ":robot:"
)

# Rich attachment without text
send_webhook_message(
  webhook_url = "https://mattermost.example.com/hooks/xxx-generatedkey-xxx",
  attachments = list(
    list(
      title = "Trade Alert",
      text = "AAPL filled at $185.50",
      color = "#00FF00"
    )
  )
)

# Direct message via webhook
send_webhook_message(
  webhook_url = "https://mattermost.example.com/hooks/xxx-generatedkey-xxx",
  text = "Private notification for you.",
  channel = "@jsmith"
)
}
}
